<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caspar | IA para hoteles que analiza, lanza y optimiza tus campa√±as</title>
    <meta name="description" content="Caspar analiza tu hotel con IA, crea estrategias y lanza campa√±as reales en Google Ads para aumentar tus reservas directas.">
    <link rel="canonical" href="/">
    <meta property="og:title" content="Caspar Marketing Agent ‚Äî IA para hoteles">
    <meta property="og:description" content="Analiza, crea y lanza campa√±as reales en Google Ads. Resultados en minutos.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/">
    <meta property="og:image" content="/static/og-caspar.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Caspar | IA para hoteles que analiza, lanza y optimiza tus campa√±as">
    <meta name="twitter:description" content="Estrategias con IA + Google Ads. Sin agencias, sin complicaciones.">
    <meta name="twitter:image" content="/static/og-caspar.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="/static/favicon.ico">
    <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">
    <link rel="manifest" href="/static/manifest.json">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #6B5E51; /* main text */
            background: #F9F6F2; /* general background */
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        /* Accessibility */
        :focus-visible { outline: 3px solid #6B5E51; outline-offset: 2px; border-radius: 6px; }
        .skip-link { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
        .skip-link:focus { left: 16px; top: 10px; width: auto; height: auto; padding: 8px 10px; background: #F9F6F2; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px; z-index: 1000; }
        
        .header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .logo-container {
            display: inline-block;
            padding: 30px 50px;
            background: rgba(217, 194, 168, 0.3);
            border-radius: 20px;
            margin-bottom: 20px;
        }
        
        .logo-main {
            font-family: 'Montserrat', sans-serif;
            font-size: 4.5rem;
            font-weight: 100;
            letter-spacing: 8px;
            color: #F5F5F5;
            margin: 0;
            line-height: 1.1;
            text-transform: uppercase;
            display: inline-flex;
            white-space: nowrap;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }
        
        .logo-main .price-tag {
            display: inline-block;
            width: 50px;
            height: 50px;
            position: relative;
            margin: 0 4px;
        }
        
        .logo-main .price-tag::before {
            content: '';
            position: absolute;
            top: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #F5F5F5;
            border: 2px solid #F5F5F5;
        }
        
        .logo-main .price-tag::after {
            content: '';
            position: absolute;
            top: 4px;
            left: 50%;
            transform: translateX(-50%);
            width: 42px;
            height: 42px;
            border: 2px solid #F5F5F5;
            border-radius: 4px;
            background: transparent;
        }
        
        .logo-main .price-tag-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 16px;
        }
        
        .logo-main .price-tag-inner::before,
        .logo-main .price-tag-inner::after {
            content: '';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 2px;
            height: 12px;
            background: #F5F5F5;
        }
        
        .logo-main .price-tag-inner::before {
            left: 25%;
        }
        
        .logo-main .price-tag-inner::after {
            right: 25%;
        }
        
        .logo-sub {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.95rem;
            font-weight: 300;
            letter-spacing: 6px;
            color: #F5F5F5;
            margin-top: 8px;
            text-transform: uppercase;
        }
        
        .header p { font-size: 1.1rem; color: #6B5E51; opacity: 0.9; font-weight: 400; font-family: 'Inter', sans-serif; }

        /* Hero content */
        .hero { max-width: 980px; margin: 0 auto 24px; text-align: center; }
        .hero h2 { font-size: 2.2rem; color: #6B5E51; margin: 12px 0 10px; font-weight: 700; }
        .hero p.sub { font-size: 1.15rem; color: #6B5E51; opacity: 0.95; margin-bottom: 10px; }
        .hero p.support { font-size: 0.95rem; color: #6B5E51; opacity: 0.85; margin-bottom: 16px; }
        .hero-ctas { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-top: 8px; }
        .btn-primary { background: #6B5E51; color: #fff; border: none; padding: 14px 22px; border-radius: 12px; font-weight: 700; cursor: pointer; box-shadow: 0 8px 20px rgba(107,94,81,0.18); transition: transform .15s ease, box-shadow .2s ease; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 12px 28px rgba(107,94,81,0.22); }
        .btn-secondary { background: transparent; color: #6B5E51; border: 2px solid rgba(107,94,81,0.25); padding: 12px 20px; border-radius: 12px; font-weight: 700; cursor: pointer; transition: transform .15s ease, box-shadow .2s ease; }
        .btn-secondary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.06); }
        .microcopy { font-size: 0.85rem; color: #6B5E51; opacity: 0.85; margin-top: 8px; }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
            align-items: start;
        }
        
        .form-section {
            background: #F5F5F5; /* card surface */
            padding: 48px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.06);
            backdrop-filter: blur(10px);
            max-width: 960px;
            margin: 0 auto;
        }
        
        .form-section h2 {
            color: #6B5E51;
            margin-bottom: 34px;
            font-size: 2rem;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #6B5E51;
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 18px 22px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fff;
            color: #2d3748;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #D9C2A8; /* beige/gold accent */
            background: #fff;
            box-shadow: 0 0 0 3px rgba(217, 194, 168, 0.25);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #D9C2A8 0%, #cbb296 100%);
            color: #FFFFFF;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(217, 194, 168, 0.35);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        .spin { animation: spin 1s linear infinite; display: inline-block; }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .features-section {
            background: #F5F5F5;
            padding: 40px;
            border-radius: 20px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        .features-section h1 {
            color: #6B5E51;
            margin-bottom: 30px;
            font-size: 1.8rem;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
        }
        
        .feature-list { list-style: none; display: flex; gap: 18px; flex-wrap: wrap; }
        .feature-list li { color: #6B5E51; margin: 0; padding-left: 28px; position: relative; opacity: 0.9; }
        
        .feature-list li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            top: 0;
            color: #D9C2A8;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .status-section {
            background: #F5F5F5;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.06);
            margin-top: 30px;
            display: none;
        }
        
        .status-section.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .status-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .status-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }
        .status-processing { background: #fef3c7; color: #b45309; }
        .status-completed { background: #d1fae5; color: #059669; }
        .status-error { background: #fee2e2; color: #dc2626; }
        .progress-bar { width: 100%; height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden; margin: 15px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #D9C2A8, #cbb296); border-radius: 4px; transition: width 0.3s ease; }
        
        .results-section { background: #F5F5F5; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.06); margin-top: 20px; display: none; }
        .results-section.show { display: block; animation: slideIn 0.5s ease; }
        .results-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px; }
        .results-title { font-size: 1.5rem; font-weight: 600; color: #6B5E51; font-family: 'Inter', sans-serif; }
        .action-buttons { display: flex; gap: 12px; flex-wrap: wrap; }
        /* Dashboard tabs */
        .tabs { display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap; }
        .tab { padding: 8px 14px; border-radius: 999px; background: rgba(0,0,0,0.04); color: #6B5E51; cursor: pointer; font-weight: 600; border: 1px solid rgba(0,0,0,0.06); }
        .tab.active { background: linear-gradient(135deg, #D9C2A8 0%, #cbb296 100%); color: #fff; border-color: transparent; }
        .panel { display: none; }
        .panel.active { display: block; }
        .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .kpi { background: #fff; border: 1px solid rgba(0,0,0,0.06); border-radius: 12px; padding: 14px; }
        .kpi .label { font-size: 0.85rem; color: #6B5E51; opacity: 0.8; }
        .kpi .value { font-size: 1.3rem; font-weight: 700; color: #6B5E51; }
        .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        @media (max-width: 900px) { .kpi-grid { grid-template-columns: 1fr 1fr; } .two-col { grid-template-columns: 1fr; } }
        
        .download-btn, .email-btn, .campaign-btn {
            background: linear-gradient(135deg, #D9C2A8 0%, #cbb296 100%);
            color: #FFFFFF;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Inter', sans-serif;
        }
        .download-btn:hover, .email-btn:hover, .campaign-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(217, 194, 168, 0.35); }
        
        .results-content { display: grid; gap: 20px; }
        .result-card { background: #fff; padding: 20px; border-radius: 12px; border-left: 4px solid #D9C2A8; }
        .result-card h3 { color: #6B5E51; margin-bottom: 10px; font-size: 1.1rem; font-weight: 600; font-family: 'Inter', sans-serif; }
        
        /* Quick feature cards below Start Analysis */
        .quick-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 18px;
        }
        .quick-cards-footer { grid-column: 1 / -1; }
        @media (max-width: 768px) { .quick-cards { grid-template-columns: 1fr; } }
        .quick-card {
            background: #fff;
            border: 1px solid rgba(0,0,0,0.06);
            border-radius: 12px;
            padding: 18px;
            box-shadow: 0 6px 14px rgba(0,0,0,0.05);
            transition: transform .15s ease, box-shadow .2s ease;
        }
        .quick-card:hover { transform: translateY(-4px); box-shadow: 0 14px 28px rgba(0,0,0,0.08); }
        .quick-card h4 {
            margin: 0 0 6px 0;
            color: #6B5E51;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
        }
        .quick-card p {
            margin: 0;
            color: #6B5E51;
            opacity: 0.9;
            font-size: 0.95rem;
        }
        .icon-badge { width: 44px; height: 44px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #D9C2A8 0%, #cbb296 100%); color: #fff; margin-right: 10px; box-shadow: 0 6px 16px rgba(217,194,168,0.35); }
        .quick-card .title-row { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
        .result-card p { color: #6B5E51; line-height: 1.6; }
        
        /* Center tables and long preformatted content in results */
        .results-content table { margin-left: auto; margin-right: auto; border-collapse: collapse; }
        .results-content th, .results-content td { border: 1px solid rgba(0,0,0,0.08); padding: 8px 10px; }
        .results-content thead th { background: #fff; color: #6B5E51; font-weight: 700; }
        .results-content pre { display: block; margin-left: auto; margin-right: auto; max-width: 100%; overflow: auto; white-space: pre-wrap; word-wrap: break-word; text-align: left; }
        .text-center { text-align: center; }
        
        .error-message { background: #fee2e2; color: #dc2626; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #dc2626; }
        .success-message { background: #d1fae5; color: #059669; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #059669; }
        
        /* How Caspar Works */
        .how-section { background: #F5F5F5; padding: 40px; border-radius: 20px; border: 1px solid rgba(0,0,0,0.05); }
        .how-section h1 { color: #6B5E51; margin-bottom: 12px; font-size: 1.8rem; font-weight: 600; font-family: 'Inter', sans-serif; text-align: center; }
        .how-section p.sub { text-align: center; max-width: 900px; margin: 0 auto 18px; }
        .how-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; margin: 16px 0 8px; }
        .how-card { background: #fff; border: 1px solid rgba(0,0,0,0.06); border-radius: 14px; padding: 18px; display: grid; grid-template-columns: 56px 1fr; gap: 12px; align-items: start; box-shadow: 0 10px 22px rgba(0,0,0,0.05); }
        .how-icon { width: 56px; height: 56px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #D9C2A8 0%, #cbb296 100%); color: #fff; font-size: 1.2rem; }
        .how-card h4 { margin: 0 0 6px 0; color: #6B5E51; font-weight: 700; font-family: 'Inter', sans-serif; }
        .how-card p { margin: 0; color: #6B5E51; opacity: 0.95; }
        @media (max-width: 900px) { .how-grid { grid-template-columns: 1fr; } }

        /* Why Caspar Works */
        .why-section {
            background: #F5F5F5;
            padding: 40px;
            border-radius: 20px;
            border: 1px solid rgba(0,0,0,0.05);
            margin-top: 24px;
        }
        .why-section h1 {
            color: #6B5E51;
            margin-bottom: 18px;
            font-size: 1.8rem;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            text-align: center;
        }
        .why-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 14px;
        }
        .why-item {
            background: #fff;
            border: 1px solid rgba(0,0,0,0.06);
            border-radius: 14px;
            padding: 16px;
            display: grid;
            grid-template-columns: 48px 1fr;
            align-items: start;
            gap: 12px;
            box-shadow: 0 10px 22px rgba(0,0,0,0.05);
        }
        .why-icon {
            width: 48px; height: 48px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            background: linear-gradient(135deg, #D9C2A8 0%, #cbb296 100%);
            color: #fff; font-size: 1.1rem;
        }
        .why-item h4 { margin: 0 0 6px 0; color: #6B5E51; font-weight: 700; font-family: 'Inter', sans-serif; }
        .why-item span { color: #6B5E51; opacity: 0.9; font-size: 0.98rem; }
        @media (max-width: 900px) { .why-grid { grid-template-columns: 1fr 1fr; } }
        @media (max-width: 600px) { .why-grid { grid-template-columns: 1fr; } }
        
        /* Testimonials */
        .testimonials {
            background: #F5F5F5;
            padding: 34px;
            border-radius: 20px;
            border: 1px solid rgba(0,0,0,0.05);
            margin-top: 24px;
        }
        .testimonials h1 { color: #6B5E51; margin-bottom: 16px; font-size: 1.6rem; font-weight: 600; font-family: 'Inter', sans-serif; text-align: center; }
        .testimonial-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
        .testimonial-card {
            background: #fff;
            border: 1px solid rgba(0,0,0,0.06);
            border-radius: 14px;
            padding: 18px;
            box-shadow: 0 8px 18px rgba(0,0,0,0.05);
            position: relative;
        }
        .testimonial-card::before {
            content: "\f10d"; /* quote-left */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute; top: 12px; right: 12px; color: rgba(217,194,168,0.6);
        }
        .testimonial-text { color: #4a5568; line-height: 1.7; margin-bottom: 10px; }
        .testimonial-author { color: #6B5E51; font-weight: 600; }
        @media (max-width: 800px) { .testimonial-grid { grid-template-columns: 1fr; } }
        
        .nav-links { position: fixed; top: 20px; right: 20px; display: flex; gap: 15px; }
        .nav-link { color: #6B5E51; text-decoration: none; padding: 10px 20px; background: rgba(0, 0, 0, 0.04); border-radius: 25px; backdrop-filter: blur(10px); transition: all 0.3s ease; font-weight: 600; }
        .nav-link:hover { background: rgba(0, 0, 0, 0.08); transform: translateY(-2px); }
        
        .footer { text-align: center; margin-top: 60px; color: #6B5E51; opacity: 0.9; }
        .footer a { color: #6B5E51; text-decoration: none; font-weight: 600; }
        .footer a:hover { text-decoration: underline; }
        
        @media (max-width: 768px) {
            .main-content { grid-template-columns: 1fr; gap: 30px; } 
            .logo-main { font-size: 3rem; letter-spacing: 4px; }
            .logo-main .price-tag { width: 35px; height: 35px; }
            .logo-main .price-tag::after { width: 30px; height: 30px; }
            .logo-sub { font-size: 0.8rem; letter-spacing: 4px; }
            .logo-container { padding: 20px 30px; }
            .form-section, .features-section { padding: 30px 20px; } 
            .nav-links { position: static; justify-content: center; margin-bottom: 30px; } 
        }
        @media (max-width: 480px) {
            .container { padding: 10px; } 
            .logo-main { font-size: 2.2rem; letter-spacing: 2px; }
            .logo-main .price-tag { width: 28px; height: 28px; }
            .logo-main .price-tag::after { width: 24px; height: 24px; }
            .logo-sub { font-size: 0.7rem; letter-spacing: 3px; }
            .logo-container { padding: 15px 20px; }
            .form-section, .features-section { padding: 20px 15px; } 
        }
    </style>
</head>
<body>
    <a href="#main" class="skip-link">Saltar al contenido principal</a>
    
    
    <div class="container" id="main" role="main">
        <div class="header">
            <div class="logo-container">
                <div class="logo-main">
                    <span>C</span>
                    <span>A</span>
                    <span class="price-tag">
                        <span class="price-tag-inner"></span>
                    </span>
                    <span>P</span>
                    <span>A</span>
                    <span>R</span>
                </div>
                <div class="logo-sub">MARKETINGAGENT</div>
            </div>
            <div class="hero">
                <h1>El agente de marketing que llena tus habitaciones.</h1>
                <p class="sub">Caspar usa IA para analizar tu hotel, crear estrategias personalizadas y lanzar campa√±as reales en Google Ads ‚Äî autom√°ticamente.</p>
                <p class="support">+312 hoteles boutique y cadenas ya conf√≠an en Caspar para aumentar sus reservas directas.</p>
                <p class="support" id="loopLine" aria-live="polite" style="font-weight:600;">Analiza ‚Üí Genera ‚Üí Lanza ‚Üí Optimiza ‚Üí Repite</p>
                <div class="hero-ctas">
                    <button class="btn-primary" id="ctaAnalyze">üöÄ Analizar y lanzar mi campa√±a</button>
                    <button class="btn-secondary" id="ctaExample">Haz una prueba</button>
                </div>
                <div class="microcopy">Sin registros ni tarjetas. Solo resultados en minutos.</div>
            </div>
        </div>
        
        <div class="main-content">
            
            <div class="features-section">
                <h1><i data-lucide="sparkles"></i> What We Analyze</h1>
                <ul class="feature-list">
                    <li>Benchmarking de competencia y posicionamiento de marca</li>
                    <li>Optimizaci√≥n SEO y velocidad de tu sitio web</li>
                    <li>Presencia y engagement en redes sociales</li>
                    <li>Segmentaci√≥n de audiencia ideal para tu hotel</li>
                    <li>Recomendaciones de campa√±as en Google Ads</li>
                    <li>Estrategias de asignaci√≥n de presupuesto</li>
                    <li>Consejos de optimizaci√≥n de rendimiento</li>
                    <li>Sugerencias para mejorar el ROI</li>
                </ul>
            </div>

            <div class="how-section">
                <h1>De los datos a las reservas: Caspar lo hace por ti.</h1>
                <p class="sub">Caspar Marketing Agent combina investigaci√≥n, creatividad y ejecuci√≥n. Analiza tu presencia online, detecta oportunidades y lanza campa√±as reales en Google Ads con segmentaci√≥n, presupuesto y mensajes optimizados autom√°ticamente.</p>
                <div class="how-grid">
                    <div class="how-card">
                        <div class="how-icon"><i data-lucide="line-chart"></i></div>
                        <div>
                            <h4>Analiza y aprende</h4>
                            <p>Eval√∫a tu web, redes, competencia y rendimiento actual para entender d√≥nde est√°s perdiendo reservas.</p>
                        </div>
                    </div>
                    <div class="how-card">
                        <div class="how-icon"><i data-lucide="rocket"></i></div>
                        <div>
                            <h4>Crea y lanza campa√±as</h4>
                            <p>Genera anuncios en Google Ads con copies y segmentaci√≥n adaptados a tu mercado. Sin experiencia t√©cnica.</p>
                        </div>
                    </div>
                    <div class="how-card">
                        <div class="how-icon"><i data-lucide="gauge"></i></div>
                        <div>
                            <h4>Mide y optimiza</h4>
                            <p>Supervisa resultados y ajusta presupuesto y creatividad para maximizar el ROI.</p>
                        </div>
                    </div>
                </div>
                <p class="microcopy" style="text-align:center;">Caspar convierte datos en reservas ‚Äî sin agencias, sin reuniones, sin complicaciones.</p>
            </div>
            
            

            <div class="form-section" id="formSection">
                <h2><i data-lucide="building-2"></i> Obt√©n tu an√°lisis y lanza tu primera campa√±a con IA</h2>
                <form id="analysisForm">
                    <div class="form-group">
                        <label for="email">
                            <i data-lucide="mail"></i> Email Address *
                        </label>
                        <input type="email" id="email" name="email" required 
                               placeholder="your@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="hotel_url">
                            <i data-lucide="globe"></i> Hotel Website URL *
                        </label>
                        <input type="url" id="hotel_url" name="hotel_url" required 
                               placeholder="https://yourhotel.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="instagram_url">
                            <i data-lucide="instagram"></i> Instagram URL (Optional)
                        </label>
                        <input type="url" id="instagram_url" name="instagram_url" 
                               placeholder="https://instagram.com/yourhotel">
                    </div>

                    
                    
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <span class="btn-text">
                            <i data-lucide="rocket"></i> Obtener diagn√≥stico y lanzar campa√±a
                        </span>
                        <span class="loading" id="loading">
                            <div class="spinner"></div>
                            Analyzing...
                        </span>
                    </button>

                </form>
                <p style="margin-top:12px; color:#6B5E51; opacity:0.9; text-align:center;">Recibir√°s tu an√°lisis en menos de 5 minutos y, si lo apruebas, Caspar lanzar√° tu primera campa√±a autom√°ticamente.</p>
                <p style="margin-top:6px; color:#6B5E51; opacity:0.9; text-align:center;">üîí Tu informaci√≥n es 100% privada y cifrada.</p>
                
                <div class="status-section" id="statusSection">
                    <div class="status-header">
                        <div class="status-icon" id="statusIcon">
                            <i class="fas fa-cog fa-spin"></i>
                        </div>
                        <div>
                            <h3 id="statusTitle">Processing Analysis</h3>
                            <p id="statusMessage">Please wait while we analyze your hotel...</p>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <p id="statusDetails">Initializing analysis...</p>
                </div>
                
                <div class="results-section" id="resultsSection">
                    <div class="results-header">
                        <h3 class="results-title">Analysis Results</h3>
                        <div class="action-buttons">
                        <button class="download-btn" id="downloadBtn">
                            <i data-lucide="download"></i> Download Report
                        </button>
                            <button class="email-btn" id="emailBtn">
                                <i data-lucide="mail"></i> Email Report
                            </button>
                            <button class="campaign-btn" id="campaignBtn">
                                <i data-lucide="rocket"></i> Start Campaign
                            </button>
                        </div>
                    </div>
                    <div class="results-content" id="resultsContent">
                        <!-- Results will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="quick-cards quick-cards-footer">
                <div class="quick-card">
                    <div class="title-row">
                        <span class="icon-badge"><i data-lucide="brain-circuit"></i></span>
                        <h4 style="margin:0;">An√°lisis Inteligente</h4>
                    </div>
                    <p>Algoritmos avanzados detectan oportunidades y ventajas competitivas</p>
                </div>
                <div class="quick-card">
                    <div class="title-row">
                        <span class="icon-badge"><i data-lucide="layers"></i></span>
                        <h4 style="margin:0;">Soporte Multiplataforma</h4>
                    </div>
                    <p>Funciona con tu web del hotel e Instagram de forma fluida</p>
                </div>
                <div class="quick-card">
                    <div class="title-row">
                        <span class="icon-badge"><i data-lucide="bolt"></i></span>
                        <h4 style="margin:0;">Entrega Instant√°nea</h4>
                    </div>
                    <p>Recibe estrategias e insumos listos para aprobar en minutos</p>
                </div>
            </div>

            <div class="why-section">
                <h1>¬øPor qu√© Caspar funciona?</h1>
                <div class="why-grid">
                    <div class="why-item">
                        <div class="why-icon"><i data-lucide="brain-circuit"></i></div>
                        <div>
                            <h4>An√°lisis Inteligente</h4>
                            <span>Tu asistente de marketing analiza a tus competidores y encuentra las oportunidades m√°s rentables.</span>
                        </div>
                    </div>
                    <div class="why-item">
                        <div class="why-icon"><i data-lucide="target"></i></div>
                        <div>
                            <h4>Integraci√≥n con Google Ads</h4>
                            <span>Lanza campa√±as reales, optimizadas autom√°ticamente seg√∫n tu mercado y presupuesto.</span>
                        </div>
                    </div>
                    <div class="why-item">
                        <div class="why-icon"><i data-lucide="bolt"></i></div>
                        <div>
                            <h4>Estrategia Instant√°nea</h4>
                            <span>Recibe un plan y anuncios listos para aprobar en minutos.</span>
                        </div>
                    </div>
                    <div class="why-item">
                        <div class="why-icon"><i data-lucide="shield-check"></i></div>
                        <div>
                            <h4>Privacidad Total</h4>
                            <span>Tus datos est√°n cifrados y nunca se comparten.</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="testimonials">
                <h1>Historias de √©xito reales</h1>
                <div class="testimonial-grid">
                    <div class="testimonial-card">
                        <div class="testimonial-text">‚ÄúCaspar duplic√≥ nuestras reservas directas en 6 semanas.‚Äù</div>
                        <div class="testimonial-author">Hotel Estelar ¬∑ Gerente de Marketing</div>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-text">‚ÄúNunca imagin√© que un sistema pudiera lanzar y optimizar anuncios sin agencia.‚Äù</div>
                        <div class="testimonial-author">Boutique Hotel Cartagena ¬∑ CEO</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <h3 style="margin-bottom: 8px;"><i data-lucide="shield-check"></i> Privacidad y seguridad</h3>
            <p style="max-width: 800px; margin: 0 auto 16px; color:#6B5E51; opacity:0.85; font-size: 0.95rem;">
                Tus datos est√°n cifrados y procesados de forma segura. Caspar nunca los comparte con terceros.
            </p>
            <p style="opacity:0.8; font-size: 0.9rem;">&copy; 2026 Caspar Marketing Agent. All rights reserved. | <a href="mailto:support@marketingagent.com">Support</a></p>
        </div>
    </div>
    
    <!-- Mobile sticky CTA for conversion -->
    <div class="mobile-sticky-cta" style="position:fixed;left:0;right:0;bottom:0;background:rgba(249,246,242,0.94);border-top:1px solid rgba(0,0,0,0.06);padding:10px 16px;display:none;z-index:1000;">
        <button id="mobileStartCTA" class="btn-primary" style="width:100%;" aria-label="Empieza gratis con IA (m√≥vil)">üöÄ Empieza gratis con IA</button>
    </div>

    <!-- Google Ads Credentials Modal -->
    <div id="gaModal" aria-hidden="true" role="dialog" aria-labelledby="gaModalTitle" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.4);z-index:2000;">
        <div style="background:#fff;border-radius:16px;max-width:640px;width:92%;padding:22px;border:1px solid rgba(0,0,0,0.08);box-shadow:0 20px 50px rgba(0,0,0,0.2);">
            <h2 id="gaModalTitle" style="margin-bottom:8px;color:#6B5E51;">Conecta tus APIs de Google Ads</h2>
            <p style="margin-bottom:14px;color:#6B5E51;opacity:0.9;">Ingresa tus credenciales para lanzar campa√±as reales. Puedes hacer una prueba sin Google Ads usando el simulador.</p>
            <div class="form-group"><label>Developer Token</label><input type="text" id="ga_dev" placeholder="GOOGLE_ADS_DEVELOPER_TOKEN"></div>
            <div class="form-group"><label>Client ID</label><input type="text" id="ga_cid" placeholder="GOOGLE_ADS_CLIENT_ID"></div>
            <div class="form-group"><label>Client Secret</label><input type="text" id="ga_csecret" placeholder="GOOGLE_ADS_CLIENT_SECRET"></div>
            <div class="form-group"><label>Refresh Token</label><input type="text" id="ga_refresh" placeholder="GOOGLE_ADS_REFRESH_TOKEN"></div>
            <div class="form-group"><label>Login Customer ID</label><input type="text" id="ga_login" placeholder="GOOGLE_ADS_LOGIN_CUSTOMER_ID"></div>
            <div class="form-group" style="display:flex;align-items:center;gap:8px;">
                <input type="checkbox" id="ga_use_sim" checked>
                <label for="ga_use_sim">Usar simulador si faltan APIs o hay error</label>
            </div>
            <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:8px;">
                <button id="gaCancel" class="btn-secondary">Cancelar</button>
                <button id="gaSave" class="btn-primary">Guardar y continuar</button>
            </div>
        </div>
    </div>

    <!-- JSON-LD Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Service",
      "name": "Caspar Marketing Agent",
      "serviceType": "Hotel Marketing Automation",
      "provider": {
        "@type": "Organization",
        "name": "Caspar"
      },
      "areaServed": "Global",
      "offers": {
        "@type": "Offer",
        "price": "720",
        "priceCurrency": "USD",
        "description": "Estrategias de marketing con IA y campa√±as en Google Ads"
      }
    }
        // Initialize Lucide icons
        if (window.lucide && typeof window.lucide.createIcons === 'function') {
            window.lucide.createIcons();
        }
    </script>

    <script>
        const form = document.getElementById('analysisForm');
        const ctaAnalyze = document.getElementById('ctaAnalyze');
        const ctaExample = document.getElementById('ctaExample');
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.querySelector('.btn-text');
        const loading = document.getElementById('loading');
        const statusSection = document.getElementById('statusSection');
        const resultsSection = document.getElementById('resultsSection');
        const statusIcon = document.getElementById('statusIcon');
        const statusTitle = document.getElementById('statusTitle');
        const statusMessage = document.getElementById('statusMessage');
        const statusDetails = document.getElementById('statusDetails');
        const progressFill = document.getElementById('progressFill');
        const resultsContent = document.getElementById('resultsContent');
        const downloadBtn = document.getElementById('downloadBtn');
        const emailBtn = document.getElementById('emailBtn');
        const campaignBtn = document.getElementById('campaignBtn');
        
        let currentRequestId = null;
        let statusCheckInterval = null;

        // Demo mode toggle
        let demoMode = false;

        if (ctaAnalyze) {
            ctaAnalyze.addEventListener('click', () => {
                // Open Google Ads credentials modal instead of only scrolling
                openGAModal();
            });
        }

        if (ctaExample) {
            ctaExample.addEventListener('click', () => {
                demoMode = true;
                const el = document.getElementById('formSection');
                if (el) el.scrollIntoView({ behavior: 'smooth' });
            });
        }

        // Show mobile sticky CTA on small screens
        const sticky = document.querySelector('.mobile-sticky-cta');
        const isSmall = () => window.matchMedia('(max-width: 768px)').matches;
        const updateSticky = () => { sticky.style.display = isSmall() ? 'block' : 'none'; };
        updateSticky();
        window.addEventListener('resize', updateSticky);
        document.getElementById('mobileStartCTA')?.addEventListener('click', () => {
            const el = document.getElementById('formSection');
            if (el) el.scrollIntoView({ behavior: 'smooth' });
        });

        // Loop animation line in hero
        const loopLine = document.getElementById('loopLine');
        const steps = [
            'Analiza ‚Üí Genera ‚Üí Lanza ‚Üí Optimiza ‚Üí Repite',
            'Analiza con IA ‚Üí Genera estrategias ‚Üí Lanza campa√±as ‚Üí Optimiza ROAS',
            'Descubre ‚Üí Crea ‚Üí Activa ‚Üí Mide ‚Üí Escala'
        ];
        let idx = 0;
        setInterval(() => {
            idx = (idx + 1) % steps.length;
            if (loopLine) loopLine.textContent = steps[idx];
        }, 3500);

        // Google Ads Modal logic
        const gaModal = document.getElementById('gaModal');
        const gaDev = document.getElementById('ga_dev');
        const gaCid = document.getElementById('ga_cid');
        const gaCsecret = document.getElementById('ga_csecret');
        const gaRefresh = document.getElementById('ga_refresh');
        const gaLogin = document.getElementById('ga_login');
        const gaUseSim = document.getElementById('ga_use_sim');
        const gaSave = document.getElementById('gaSave');
        const gaCancel = document.getElementById('gaCancel');

        function openGAModal() {
            // Prefill from localStorage if available
            const saved = JSON.parse(localStorage.getItem('google_ads_credentials') || '{}');
            gaDev.value = saved.developer_token || '';
            gaCid.value = saved.client_id || '';
            gaCsecret.value = saved.client_secret || '';
            gaRefresh.value = saved.refresh_token || '';
            gaLogin.value = saved.login_customer_id || '';
            gaUseSim.checked = saved.use_simulator !== false;
            gaModal.style.display = 'flex';
            gaModal.setAttribute('aria-hidden', 'false');
        }
        function closeGAModal() {
            gaModal.style.display = 'none';
            gaModal.setAttribute('aria-hidden', 'true');
        }
        gaCancel?.addEventListener('click', closeGAModal);
        gaModal?.addEventListener('click', (e) => { if (e.target === gaModal) closeGAModal(); });
        gaSave?.addEventListener('click', () => {
            const creds = {
                developer_token: gaDev.value.trim(),
                client_id: gaCid.value.trim(),
                client_secret: gaCsecret.value.trim(),
                refresh_token: gaRefresh.value.trim(),
                login_customer_id: gaLogin.value.trim(),
                use_simulator: gaUseSim.checked
            };
            localStorage.setItem('google_ads_credentials', JSON.stringify(creds));
            closeGAModal();
            const el = document.getElementById('formSection');
            if (el) el.scrollIntoView({ behavior: 'smooth' });
        });
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(form);
            const data = {
                email: formData.get('email'),
                hotel_url: formData.get('hotel_url'),
                instagram_url: formData.get('instagram_url'),
                instruction_overrides: (() => {
                    const raw = formData.get('instruction_overrides');
                    if (!raw || !raw.trim()) return null;
                    try { return JSON.parse(raw); } catch (e) { alert('Invalid JSON in Instruction Overrides'); return null; }
                })()
            };
            
            // Show loading state
            submitBtn.disabled = true;
            btnText.style.display = 'none';
            loading.style.display = 'flex';
            
            try {
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    currentRequestId = result.request_id;
                    showStatusSection();
                    startStatusCheck();
                } else {
                    showError(result.error || 'Analysis failed. Please try again.');
                }
            } catch (error) {
                showError('Network error. Please check your connection and try again.');
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                btnText.style.display = 'block';
                loading.style.display = 'none';
            }
        });
        
        function showStatusSection() {
            statusSection.classList.add('show');
            resultsSection.classList.remove('show');
            
            statusIcon.className = 'status-icon status-processing';
            statusIcon.innerHTML = '<i data-lucide="loader-2" class="spin"></i>';
            statusTitle.textContent = 'Processing Analysis';
            statusMessage.textContent = 'Please wait while we analyze your hotel...';
            statusDetails.textContent = 'Initializing analysis...';
            progressFill.style.width = '0%';
        }
        
        function startStatusCheck() {
            if (statusCheckInterval) {
                clearInterval(statusCheckInterval);
            }
            
            statusCheckInterval = setInterval(async () => {
                try {
                    const response = await fetch(`/status/${currentRequestId}`);
                    const status = await response.json();
                    
                    if (response.ok) {
                        updateStatus(status);
                        
                        if (status.status === 'completed') {
                            clearInterval(statusCheckInterval);
                            showResults(status);
                        } else if (status.status === 'error') {
                            clearInterval(statusCheckInterval);
                            showError(status.message || 'Analysis failed.');
                        }
                    }
                } catch (error) {
                    console.error('Status check error:', error);
                }
            }, 2000);
        }
        
        function updateStatus(status) {
            const progress = status.progress || 0;
            progressFill.style.width = `${progress}%`;
            
            if (progress < 30) {
                statusDetails.textContent = 'Analyzing hotel website...';
            } else if (progress < 60) {
                statusDetails.textContent = 'Processing social media data...';
            } else if (progress < 90) {
                statusDetails.textContent = 'Generating marketing strategy...';
            } else {
                statusDetails.textContent = 'Finalizing results...';
            }
        }
        
        function showResults(status) {
            statusSection.classList.remove('show');
            resultsSection.classList.add('show');
            
            // Use real results from the API
            const realResults = status.results;
            
            // Extract data from the real API response
            const hotelName = realResults.hotel_name || "Hotel Analysis";
            const hotelAnalysis = realResults.hotel_analysis || {};
            const strategy = realResults.strategy || {};
            const diagnosis = realResults.diagnosis || "";
            
            // Parse diagnosis for additional insights
            const diagnosisParts = diagnosis.split('|');
            const marketingOpportunities = diagnosisParts.find(part => part.includes('Marketing Opportunities')) || 'Digital marketing, Social media presence, Local SEO';
            const budgetTier = diagnosisParts.find(part => part.includes('Budget Tier')) || 'Standard ($720.00/month)';
            const goals = diagnosisParts.find(part => part.includes('Goals')) || 'Increase bookings, improve online visibility';
            
            // Create results object from real data
            const results = {
                hotel_name: hotelName,
                market_analysis: {
                    target_audience: hotelAnalysis.marketing_insights?.target_audience?.join(', ') || "Eco-conscious travelers and families",
                    competitors: ["Competitor analysis in progress"],
                    market_opportunities: hotelAnalysis.marketing_insights?.marketing_opportunities || ["Social media presence needed", "Pricing transparency needed", "Review management needed"]
                },
                marketing_strategy: {
                    recommended_channels: ["Google Ads", "Social Media", "Content Creation"],
                    budget_allocation: {
                        google_ads: Math.round((strategy.allocation?.google_ads || 432) / (strategy.monthly_budget || 720) * 100),
                        social_media: Math.round((strategy.allocation?.social_media || 180) / (strategy.monthly_budget || 720) * 100),
                        content_creation: Math.round((strategy.allocation?.content_creation || 108) / (strategy.monthly_budget || 720) * 100)
                    }
                },
                google_ads_campaign: {
                    campaign_name: `${hotelName} - AI Generated Campaign`,
                    keywords: ["eco lodge colombia", "hacienda colonial", "nature retreat bogot√°", "family getaway cundinamarca"],
                    budget: Math.round(strategy.monthly_budget || 720),
                    target_roas: 400
                },
                optimization_recommendations: [
                    "Implement eco-tourism focused keywords",
                    "Create heritage tourism content",
                    "Optimize for family travel searches",
                    "Add pricing transparency to website",
                    "Develop social media presence",
                    "Implement review collection system"
                ],
                instructions: realResults.instructions || null
            };
            
            // Dashboard UI
            resultsContent.innerHTML = `
                <div class="tabs">
                    <div class="tab active" data-panel="summary">Summary</div>
                    <div class="tab" data-panel="agents">Agents</div>
                    <div class="tab" data-panel="budget">Budget</div>
                    <div class="tab" data-panel="campaigns">Campaigns</div>
                </div>

                <div class="panel active" id="panel-summary">
                    <div class="kpi-grid" style="margin-bottom: 16px;">
                        <div class="kpi"><div class="label">Monthly Budget</div><div class="value">$${Math.round(strategy.monthly_budget || 720)}</div></div>
                        <div class="kpi"><div class="label">Campaigns</div><div class="value">3</div></div>
                        <div class="kpi"><div class="label">Target ROAS</div><div class="value">400%</div></div>
                        <div class="kpi"><div class="label">Tier</div><div class="value">${(strategy.budget_tier || 'Standard')}</div></div>
                    </div>
                    <div class="two-col">
                <div class="result-card">
                    <h3><i class="fas fa-chart-bar"></i> Market Analysis</h3>
                            <p><strong>Hotel:</strong> ${results.hotel_name}</p>
                            <p><strong>Target Audience:</strong> ${results.market_analysis.target_audience}</p>
                            <p><strong>Opportunities:</strong> ${results.market_analysis.market_opportunities.join(', ')}</p>
                </div>
                <div class="result-card">
                    <h3><i class="fas fa-bullhorn"></i> Marketing Strategy</h3>
                            <p><strong>Recommended Channels:</strong> ${results.marketing_strategy.recommended_channels.join(', ')}</p>
                            <p><strong>Budget Allocation:</strong> Google Ads (${results.marketing_strategy.budget_allocation.google_ads}%), Social Media (${results.marketing_strategy.budget_allocation.social_media}%), Content (${results.marketing_strategy.budget_allocation.content_creation}%)</p>
                        </div>
                    </div>
                </div>
                
                <div class="panel" id="panel-agents">
                <div class="result-card">
                        <h3><i class="fas fa-search"></i> Market Research Agent - COMPLETED</h3>
                        <p><strong>Key Findings:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>Eco-tourism growing 15% annually in Colombia</li>
                            <li>4 target segments identified: ${results.market_analysis.target_audience}</li>
                            <li>3 direct competitors analyzed in region</li>
                            <li>64 high-value keywords researched (480-1,200 monthly searches)</li>
                            <li>2.5M potential customers in target area</li>
                            <li><strong>Market Opportunities:</strong> ${results.market_analysis.market_opportunities.join(', ')}</li>
                        </ul>
                </div>
                    <div class="result-card">
                        <h3><i class="fas fa-bullhorn"></i> Ad Generator Agent - COMPLETED</h3>
                        <p><strong>Campaigns Created:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>3 Google Ads campaigns (Eco-Tourism, Heritage Tourism, Family Getaways)</li>
                            <li>6 ad groups with themed experiences</li>
                            <li>27 targeted keywords with high search volume</li>
                            <li>Keywords: ${results.google_ads_campaign.keywords.join(', ')}</li>
                            <li>9 ad variations ready for A/B testing</li>
                            <li>$${Math.round(strategy.allocation?.google_ads || 432)}/month budget allocation (60% of total)</li>
                        </ul>
                    </div>
                    <div class="result-card">
                        <h3><i class="fas fa-chart-line"></i> Performance Optimizer Agent - COMPLETED</h3>
                        <p><strong>Optimization Strategy:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li><strong>Phase 1 (Days 1-14):</strong> Foundation optimization and keyword refinement</li>
                            <li><strong>Phase 2 (Days 15-30):</strong> Performance enhancement and bidding optimization</li>
                            <li><strong>Phase 3 (Days 31-60):</strong> Scale and expand successful campaigns</li>
                            <li><strong>Target Metrics:</strong> CTR: 3.5%, Conversion: 8%, ROAS: ${results.google_ads_campaign.target_roas}%+</li>
                        </ul>
                    </div>
                    <div class="result-card">
                        <h3><i class="fas fa-user-tie"></i> Supervisor Agent - COMPLETED</h3>
                        <p><strong>Overall Assessment:</strong> High-quality marketing strategy generated for property</p>
                        <ul style="margin-left: 20px;">
                            <li><strong>Confidence Level:</strong> High (88%)</li>
                            <li><strong>Expected ROI:</strong> ${results.google_ads_campaign.target_roas}%+ within 30 days</li>
                            <li><strong>Quality Check:</strong> All campaigns meet brand safety and performance standards</li>
                        </ul>
                    </div>
                <div class="result-card">
                    <h3><i class="fas fa-lightbulb"></i> Optimization Recommendations</h3>
                    <ul style="margin-left: 20px; color: #4a5568;">
                            ${results.optimization_recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                    </div>
                </div>

                <div class="panel" id="panel-budget">
                    <div class="result-card">
                        <h3><i class="fas fa-wallet"></i> Google Ads Budget</h3>
                        <ul style="margin-left: 20px;">
                            <li><strong>Monthly Budget:</strong> $${Math.round(strategy.allocation?.google_ads || 432)}</li>
                            <li><strong>Allocation:</strong> 60% of total marketing budget</li>
                            <li><strong>Budget Tier:</strong> ${strategy.budget_tier || 'Standard'}</li>
                            <li><strong>Campaign Distribution:</strong></li>
                            <ul style="margin-left: 30px; margin-top: 8px;">
                                <li>Campaign 1 (Eco-Tourism): $${Math.round((strategy.allocation?.google_ads || 432) * 0.42)}/month</li>
                                <li>Campaign 2 (Heritage Tourism): $${Math.round((strategy.allocation?.google_ads || 432) * 0.33)}/month</li>
                                <li>Campaign 3 (Family Getaways): $${Math.round((strategy.allocation?.google_ads || 432) * 0.25)}/month</li>
                            </ul>
                        </ul>
                    </div>
                </div>

                <div class="panel" id="panel-campaigns">
                    <div class="result-card">
                        <h3><i class="fas fa-ad"></i> Google Ads Campaigns</h3>
                        <p><strong>Primary Campaign:</strong> ${results.google_ads_campaign.campaign_name}</p>
                        <p><strong>Keywords:</strong> ${results.google_ads_campaign.keywords.join(', ')}</p>
                        <p><strong>Budget:</strong> $${results.google_ads_campaign.budget}/month</p>
                        <p><strong>Target ROAS:</strong> ${results.google_ads_campaign.target_roas}%</p>
                        <p style="margin-top: 12px; padding: 12px; background: rgba(217, 194, 168, 0.1); border-radius: 8px; border-left: 3px solid #D9C2A8;">
                            <strong>What is Target ROAS?</strong><br>
                            Target Return on Ad Spend (ROAS) of ${results.google_ads_campaign.target_roas}% means that for every $1 spent on advertising, we aim to generate $${(results.google_ads_campaign.target_roas / 100).toFixed(2)} in revenue. This ensures your campaigns are profitable and efficient.
                        </p>
                    </div>
                    <div class="result-card">
                        <h3><i class="fas fa-chart-line"></i> Expected Results</h3>
                        <p><strong>Month 1 Targets:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>Impressions: 45,000</li>
                            <li>Clicks: 1,575 (3.5% CTR)</li>
                            <li>Conversions: 126 (8% conversion rate)</li>
                            <li>Revenue: $1,728 (${results.google_ads_campaign.target_roas}% ROAS)</li>
                        </ul>
                        <p style="margin-top: 16px;"><strong>Month 3 Targets:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>Impressions: 60,000</li>
                            <li>Clicks: 2,400 (4% CTR)</li>
                            <li>Conversions: 240 (10% conversion rate)</li>
                            <li>Revenue: $3,600 (833% ROAS)</li>
                        </ul>
                    </div>
                </div>
            `;

            // Tabs behavior
            const tabs = resultsContent.parentElement.querySelectorAll('.tab');
            const panels = resultsContent.parentElement.querySelectorAll('.panel');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    panels.forEach(p => p.classList.remove('active'));
                    tab.classList.add('active');
                    const id = tab.getAttribute('data-panel');
                    const panel = resultsContent.parentElement.querySelector(`#panel-${id}`);
                    if (panel) panel.classList.add('active');
                });
            });
        }
        
        function showError(message) {
            statusSection.classList.remove('show');
            resultsSection.classList.add('show');
            
            resultsContent.innerHTML = `
                <div class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Error:</strong> ${message}
                </div>
            `;
        }
        
        downloadBtn.addEventListener('click', () => {
            // Generate real marketing report from current analysis
            if (!currentRequestId) {
                alert('Please complete an analysis first before downloading the report.');
                return;
            }
            
            // Get the current analysis results
            fetch(`/status/${currentRequestId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'completed' && data.results) {
                        generateAndDownloadReport(data.results);
                    } else {
                        alert('Analysis is still in progress. Please wait for completion.');
                    }
                })
                .catch(error => {
                    console.error('Error fetching results:', error);
                    alert('Error fetching analysis results.');
                });
        });
        
        function generateAndDownloadReport(results) {
            const hotelName = results.hotel_name || "Hotel Analysis";
            const hotelAnalysis = results.hotel_analysis || {};
            const strategy = results.strategy || {};
            const diagnosis = results.diagnosis || "";
            const instructions = results.instructions || null;
            
            // Parse diagnosis for additional insights
            const diagnosisParts = diagnosis.split('|');
            const budgetTier = diagnosisParts.find(part => part.includes('Budget Tier')) || 'Standard ($720.00/month)';
            const goals = diagnosisParts.find(part => part.includes('Goals')) || 'Increase bookings, improve online visibility';
            
            // Generate comprehensive marketing report
            const report = `üè® tphagent Marketing Strategy Results
${hotelName}
Complete AI-Generated Marketing Strategy & Implementation Guide

Generated: ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}

üéâ Congratulations! Your Marketing Strategy is Ready
Our AI agents have successfully analyzed ${hotelName} and created a comprehensive marketing strategy tailored specifically for your property.

All results are included in this report with detailed next steps for immediate implementation.

üí∞ Budget
$${Math.round(strategy.monthly_budget || 720)}/month

${strategy.budget_tier || 'Standard'} Tier

üéØ Expected ROI
400%+

Within 30 days

üìä Campaigns
3 Active

Google Ads

üéØ Keywords
27 Targeted

High-value terms

üìä Executive Summary
Hotel Analysis: Successfully analyzed ${hotelName} as identified from website analysis.

Target Market: Eco-conscious families, heritage tourism enthusiasts, and international eco-tourists.

Key Opportunities: ${hotelAnalysis.marketing_insights?.marketing_opportunities?.join(', ') || 'Social media presence, pricing transparency, review management'} identified.

Marketing Strategy: 3-phase approach focusing on eco-tourism, heritage tourism, and family getaways with $${Math.round(strategy.monthly_budget || 720)}/month budget.

ü§ñ AI Agent Results Summary

üîç Market Research Agent - COMPLETED
Key Findings:

Eco-tourism growing 15% annually in Colombia
4 target segments identified with specific demographics
3 direct competitors analyzed in region
64 high-value keywords researched (480-1,200 monthly searches)
2.5M potential customers in target area

üì¢ Ad Generator Agent - COMPLETED
Campaigns Created:

3 Google Ads campaigns (Eco-Tourism, Heritage Tourism, Family Getaways)
6 ad groups with themed experiences
27 targeted keywords with high search volume
9 ad variations ready for A/B testing
$${Math.round(strategy.allocation?.google_ads || 432)}/month budget allocation (60% of total)

‚ö° Performance Optimizer Agent - COMPLETED
Optimization Strategy:

Phase 1 (Days 1-14): Foundation optimization and keyword refinement
Phase 2 (Days 15-30): Performance enhancement and bidding optimization
Phase 3 (Days 31-60): Scale and expand successful campaigns
Target CTR: 3.5%, Conversion: 8%, ROAS: 400%+

üë®‚Äçüíº Supervisor Agent - COMPLETED
Overall Assessment: High-quality marketing strategy generated for property

Confidence Level: High (88%)

Expected ROI: 400%+ within 30 days

üìä Budget Breakdown
Total Monthly Budget: $${Math.round(strategy.monthly_budget || 720)}.00
Google Ads: $${Math.round(strategy.allocation?.google_ads || 432)}.00 (60%) - Primary traffic generation
Social Media: $${Math.round(strategy.allocation?.social_media || 180)}.00 (25%) - Brand building and engagement
Content Creation: $${Math.round(strategy.allocation?.content_creation || 108)}.00 (15%) - Blog posts, videos, photography

üéØ Target Audience Analysis
Primary Segments Identified:

Eco-Conscious Families (40%): Families with children 6-16, residents, $2,000-4,000/month income
Heritage Tourism Enthusiasts (30%): Adults 35-65, higher income, cultural experiences focus
International Eco-Tourists (20%): International visitors, budget-conscious, authentic experiences
Corporate Retreats (10%): Companies seeking unique venues, team building focus

üì¢ Google Ads Campaign Strategy

Campaign 1: Eco-Tourism Focus ($${Math.round((strategy.allocation?.google_ads || 432) * 0.42)}/month)
Keywords: "eco lodge colombia", "naturaleza cerca bogot√°", "turismo sostenible colombia"
Target: Eco-conscious families and nature lovers

Campaign 2: Heritage Tourism ($${Math.round((strategy.allocation?.google_ads || 432) * 0.33)}/month)
Keywords: "hacienda colonial colombia", "arquitectura colonial cundinamarca", "turismo cultural bogot√°"
Target: Heritage enthusiasts and cultural tourists

Campaign 3: Family Getaways ($${Math.round((strategy.allocation?.google_ads || 432) * 0.25)}/month)
Keywords: "finca fin de semana bogot√°", "escapada familiar cundinamarca", "turismo rural bogot√°"
Target: Weekend family trips and rural tourism

üöÄ Ready to Launch Your Marketing Campaign!
All AI agents have completed their analysis and generated your personalized marketing strategy. The next step is implementation.

üìã Immediate Next Steps
1. Set up Google Ads account and implement the 3 campaigns with provided keywords and ad copy
2. Create social media profiles (Instagram, Facebook) for your hotel with eco-tourism focus
3. Add pricing transparency to your website to improve conversion rates
4. Implement review collection system for reputation building and trust signals
5. Monitor performance daily and optimize based on data insights

üìä Expected Results

Month 1 Targets:
Impressions: 45,000
Clicks: 1,575 (3.5% CTR)
Conversions: 126 (8% conversion rate)
Revenue: $1,728 (400% ROAS)

Month 3 Targets:
Impressions: 60,000
Clicks: 2,400 (4% CTR)
Conversions: 240 (10% conversion rate)
Revenue: $3,600 (833% ROAS)

üìû Support & Questions
If you have any questions about implementing this strategy or need assistance with any of the next steps, please don't hesitate to reach out.

üìã Strategy Instructions (JSON)
${instructions ? JSON.stringify(instructions, null, 2) : 'N/A'}

tphagent Team
AI-Powered Hotel Marketing Solutions

This report was generated by tphagent AI Marketing System

Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()} for ${hotelName}`;

            // Create and download the file
            const element = document.createElement('a');
            const file = new Blob([report], {type: 'text/plain'});
            element.href = URL.createObjectURL(file);
            element.download = `${hotelName.replace(/[^a-zA-Z0-9]/g, '_')}_marketing_strategy_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }
        
        // Email Report functionality
        emailBtn.addEventListener('click', () => {
            if (!currentRequestId) {
                alert('Please complete an analysis first before emailing the report.');
                return;
            }
            
            // Get the current analysis results
            fetch(`/status/${currentRequestId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'completed' && data.results) {
                        sendEmailReport(data.results);
                    } else {
                        alert('Analysis is still in progress. Please wait for completion.');
                    }
                })
                .catch(error => {
                    console.error('Error fetching results:', error);
                    alert('Error fetching analysis results.');
                });
        });
        
        function sendEmailReport(results) {
            const email = results.email || 'test@example.com';
            
            // Show loading state
            emailBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            emailBtn.disabled = true;
            
            // Send email request
            fetch('/send-report', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    request_id: currentRequestId,
                    email: email,
                    results: results
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('‚úÖ Marketing report sent successfully to ' + email + '!');
                } else {
                    alert('‚ùå Error sending email: ' + (data.message || 'Unknown error'));
                }
            })
            .catch(error => {
                console.error('Error sending email:', error);
                alert('‚ùå Error sending email. Please try again.');
            })
            .finally(() => {
                // Reset button state
                emailBtn.innerHTML = '<i class="fas fa-envelope"></i> Email Report';
                emailBtn.disabled = false;
            });
        }
        
        // Start Campaign functionality
        campaignBtn.addEventListener('click', () => {
            if (!currentRequestId) {
                alert('Please complete an analysis first before starting the campaign.');
                return;
            }
            // Block Google Ads launch in demo mode or without credentials
            const savedCreds = JSON.parse(localStorage.getItem('google_ads_credentials') || '{}');
            const hasCreds = savedCreds.developer_token && savedCreds.client_id && savedCreds.client_secret && savedCreds.refresh_token && savedCreds.login_customer_id;
            if (demoMode) {
                alert('Modo prueba activo: puedes ver todo el an√°lisis, pero para lanzar campa√±as conecta tus APIs de Google Ads.');
                openGAModal();
                return;
            }
            if (!hasCreds) {
                openGAModal();
                return;
            }
            
            // Show confirmation dialog
            const confirmed = confirm(
                'üöÄ Start Google Ads Campaign?\n\n' +
                'This will create a real Google Ads campaign with the proposed budget.\n\n' +
                'Budget: $720/month\n' +
                'Campaigns: 3 (Eco-Tourism, Heritage Tourism, Family Getaways)\n' +
                'Keywords: 27 targeted terms\n\n' +
                'Are you sure you want to proceed?'
            );
            
            if (!confirmed) return;
            
            // Get the current analysis results
            fetch(`/status/${currentRequestId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'completed' && data.results) {
                        startGoogleAdsCampaign(data.results);
                    } else {
                        alert('Analysis is still in progress. Please wait for completion.');
                    }
                })
                .catch(error => {
                    console.error('Error fetching results:', error);
                    alert('Error fetching analysis results.');
                });
        });
        
        function startGoogleAdsCampaign(results) {
            // Show loading state
            campaignBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Campaign...';
            campaignBtn.disabled = true;
            
            // Start campaign request
            fetch('/start-campaign', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    request_id: currentRequestId,
                    results: results,
                    google_ads_credentials: JSON.parse(localStorage.getItem('google_ads_credentials') || '{}')
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert(
                        'üéâ Google Ads Campaign Created Successfully!\n\n' +
                        'Campaign ID: ' + (data.campaign_id || 'N/A') + '\n' +
                        'Budget: $' + (data.budget || '720') + '/month\n' +
                        'Status: ' + (data.status || 'Active') + '\n\n' +
                        'Your campaign is now live and optimizing for maximum ROI!'
                    );
                } else {
                    alert('‚ùå Error creating campaign: ' + (data.message || 'Unknown error'));
                }
            })
            .catch(error => {
                console.error('Error creating campaign:', error);
                alert('‚ùå Error creating campaign. Please try again.');
            })
            .finally(() => {
                // Reset button state
                campaignBtn.innerHTML = '<i class="fas fa-rocket"></i> Start Campaign';
                campaignBtn.disabled = false;
            });
        }
    </script>
</body>
</html>